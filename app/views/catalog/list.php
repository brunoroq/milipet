<?php ?><h1>Catálogo</h1><form method="get" class="filters"><input type="hidden" name="r" value="catalog"><input type="text" name="q" placeholder="Buscar..." value="<?php echo htmlspecialchars($q); ?>"><select name="cid"><option value="">Todas las categorías</option><?php foreach($categories as $c): ?><option value="<?php echo $c['id']; ?>" <?php echo ($cid==$c['id']?'selected':''); ?>><?php echo htmlspecialchars($c['name']); ?></option><?php endforeach; ?></select><select name="species"><option value="">Todas las especies</option><option value="Perros" <?php echo ($species==='Perros'?'selected':''); ?>>Perros</option><option value="Gatos" <?php echo ($species==='Gatos'?'selected':''); ?>>Gatos</option><option value="Aves" <?php echo ($species==='Aves'?'selected':''); ?>>Aves</option><option value="Otros" <?php echo ($species==='Otros'?'selected':''); ?>>Otros</option></select><button class="btn" type="submit">Filtrar</button></form><div class="grid"><?php foreach($products as $p): ?><article class="card"><img src="<?php echo htmlspecialchars($p['image_url'] ?: 'assets/img/placeholder.png'); ?>"><h3><?php echo htmlspecialchars($p['name']); ?></h3><p class="muted"><?php echo htmlspecialchars($p['category_name'] ?? ''); ?></p><strong>$<?php echo number_format($p['price'] ?? 0, 0, ',', '.'); ?></strong><p>Stock: <?php echo (int)$p['stock']; ?></p><div class="row"><a class="btn" href="?r=product&id=<?php echo $p['id']; ?>">Ver</a><a class="btn-outline" target="_blank" href="https://wa.me/56900000000?text=Hola%20MiliPet,%20me%20interesa:%20<?php echo urlencode($p['name']); ?>">Comprar / Consultar</a></div></article><?php endforeach; ?></div>